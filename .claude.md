# EduGrade Global

## Descripcion
Sistema de gestion academica global que permite el registro inmutable de calificaciones, conversion entre escalas internacionales, seguimiento de trayectorias academicas y auditoria completa de operaciones.

## Stack Tecnologico

### Backend
- **Runtime**: Node.js 18+
- **Framework**: Express.js
- **Language**: JavaScript/TypeScript

### Databases
- **MongoDB**: Datos principales (estudiantes, instituciones, materias, calificaciones)
- **Neo4j**: Grafos de trayectorias academicas (RF3)
- **Cassandra**: Auditoria inmutable (RF5)
- **Redis**: Cache y sesiones

### Frontend
- **Framework**: React 18+
- **Build Tool**: Vite
- **UI**: Tailwind CSS

### Infrastructure
- **Containerization**: Docker Compose
- **Orchestration**: Docker Swarm (opcional)

---

## Requerimientos Funcionales (TPO)

| RF | Descripcion | Database | Service |
|----|-------------|----------|---------|
| RF1 | Registro inmutable de calificaciones | MongoDB | Calificaciones |
| RF2 | Conversion entre escalas de calificacion | MongoDB | Conversion Service |
| RF3 | Trayectorias academicas | Neo4j | Trayectorias Service |
| RF4 | Reportes y estadisticas | MongoDB + Neo4j | Reportes Service |
| RF5 | Auditoria inmutable | Cassandra | Auditoria Service |

---

## Estructura del Proyecto

```
edugrade-global/
├── backend/
│   └── src/
│       ├── config/          # Configuraciones de DBs y app
│       ├── models/          # Modelos MongoDB (Mongoose)
│       ├── routes/          # Rutas Express
│       ├── controllers/     # Controllers
│       ├── services/        # Servicios de negocio
│       ├── middlewares/     # Middlewares Express
│       └── utils/           # Utilidades (logger, helpers)
├── frontend/                # React + Vite
├── docker/                  # Dockerfiles y configs
├── docs/                    # Documentacion
│   ├── milestone.md         # Tracking de features
│   └── architecture/        # Diagramas y specs
└── scripts/                 # Scripts de utilidad
```

---

## Comandos Utiles

### Docker
```bash
# Levantar todos los servicios
docker compose up -d

# Ver logs de un servicio
docker compose logs -f mongodb

# Reiniciar un servicio
docker compose restart neo4j

# Detener todo
docker compose down

# Limpiar volumenes (CUIDADO: borra datos)
docker compose down -v
```

### Backend
```bash
# Instalar dependencias
cd backend && npm install

# Desarrollo con hot reload
npm run dev

# Tests
npm test

# Lint
npm run lint
```

### Frontend
```bash
# Desarrollo
cd frontend && npm run dev

# Build produccion
npm run build
```

---

## Convenciones de Codigo

### Nomenclatura
- **Archivos**: kebab-case (`estudiante-controller.js`)
- **Variables/Funciones**: camelCase (`getEstudiante`)
- **Clases/Modelos**: PascalCase (`Estudiante`)
- **Constantes**: UPPER_SNAKE_CASE (`MAX_RETRY_ATTEMPTS`)

### Estructura de Controllers
```javascript
// Patron: thin controller, fat service
const create = async (req, res, next) => {
  try {
    const result = await service.create(req.body);
    res.status(201).json(result);
  } catch (error) {
    next(error);
  }
};
```

### Modelos MongoDB
- Usar timestamps: true
- Validaciones en schema
- Indices para queries frecuentes

---

## Agentes Recomendados por Tipo de Tarea

| Tipo de Tarea | Agente | Uso |
|---------------|--------|-----|
| Infraestructura Docker | `Bash` | Comandos docker, docker-compose |
| Exploracion de codigo | `Explore` | Buscar patrones, entender estructura |
| Planificacion | `Plan` | Disenar implementaciones complejas |
| Backend (controllers, services) | `code-simplifier` | Refactorizar y simplificar |
| Frontend (componentes React) | `/frontend-design` | UI de alta calidad |
| Tareas complejas multi-step | `general-purpose` | Operaciones que requieren multiples pasos |
| Git operations | `Bash` + `/commit` | Commits, branches, PRs |

---

## MCPs Recomendados

Para maximizar la productividad con Claude Code, se recomienda instalar los siguientes MCPs:

| MCP | Proposito | Instalacion |
|-----|-----------|-------------|
| **MongoDB MCP Server** | Consultas y operaciones directas en MongoDB | [mongodb.com/mcp-server](https://www.mongodb.com/products/tools/mcp-server) |
| **Neo4j MCP Server** | Operaciones en grafos, queries Cypher | [github.com/neo4j-contrib/mcp-neo4j](https://github.com/neo4j-contrib/mcp-neo4j) |
| **Cassandra MCP Server** | Auditoria inmutable, queries CQL | [github.com/sahil1115/mcp-cassandra-server](https://github.com/sahil1115/mcp-cassandra-server) |
| **Docker MCP Toolkit** | Gestion de contenedores desde Claude | [docs.docker.com/ai/mcp-catalog-and-toolkit](https://docs.docker.com/ai/mcp-catalog-and-toolkit/toolkit/) |

### Configuracion de MCPs (Ya instalados)

```bash
# MongoDB MCP (conectado)
claude mcp add mongodb -e MDB_MCP_CONNECTION_STRING="mongodb://admin:edugrade2024@localhost:27017" -- npx -y mongodb-mcp-server

# Neo4j MCP (conectado)
claude mcp add neo4j -e NEO4J_URI="bolt://localhost:7687" -e NEO4J_USER="neo4j" -e NEO4J_PASSWORD="edugrade2024" -- npx -y neo4j-mcpserver

# Cassandra: No hay MCP disponible - usar docker exec o cassandra-driver
```

---

## Workflow de Desarrollo

1. **Nueva Feature**:
   - Revisar `docs/milestone.md` para identificar tareas
   - Usar `Explore` para entender codigo existente
   - Usar `Plan` si es complejo
   - Implementar con agente apropiado
   - Usar `/commit` para guardar cambios

2. **Bug Fix**:
   - Usar `Explore` para localizar el problema
   - Aplicar fix minimo necesario
   - Agregar test si aplica

3. **Refactoring**:
   - Usar `code-simplifier` para mejorar codigo
   - Mantener funcionalidad existente
   - Verificar tests pasan

---

## Variables de Entorno

```env
# MongoDB
MONGODB_URI=mongodb://localhost:27017/edugrade

# Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# Cassandra
CASSANDRA_HOSTS=localhost
CASSANDRA_KEYSPACE=edugrade_audit

# Redis
REDIS_URL=redis://localhost:6379

# App
PORT=3000
NODE_ENV=development
```

---

## Links Utiles

- [Milestone Tracking](./docs/milestone.md)
- [MongoDB Docs](https://www.mongodb.com/docs/)
- [Neo4j Cypher Manual](https://neo4j.com/docs/cypher-manual/)
- [Cassandra CQL](https://cassandra.apache.org/doc/latest/cql/)
